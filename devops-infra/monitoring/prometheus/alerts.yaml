apiVersion: v1
kind: ConfigMap
metadata:
  name: prometheus-alerts
  namespace: gamification
data:
  alerts.yml: |
    groups:
      - name: app-alerts
        rules:
          - alert: HighErrorRate
            expr: rate(flask_http_request_total{status=~"5.."}[5m]) > 0.05
            for: 1m
            labels:
              severity: critical
            annotations:
              summary: "High HTTP 5xx error rate detected"
          - alert: DatabaseDown
            expr: up{job="database"} == 0
            for: 1m
            labels:
              severity: critical
            annotations:
              summary: "Database instance is down"
